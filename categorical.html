<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org;">
  <title>Module 8: The DAR Tea</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="script.js"></script>
</head>
<body>
<nav><a href="index.html">&larr; Back to Town</a></nav>
<header>
  <h1>Module 8: The DAR Tea Party</h1>
  <p>"We are not gossiping, Rory. We are sharing vital demographic information."</p>
</header>

<div class="concept-card">
  <h2>1. The Contingency Table</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> When you have two Categorical variables (categories, not numbers), you can't calculate a Mean. You calculate <strong>Counts</strong>.</p>
    <p>We use a <strong>Contingency Table</strong> to cross-reference them.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>table(df$col1, df$col2)</code>
    </div>
  </div>

  <div class="instruction-box">
    <h3>ðŸ«– Mission: Count the Guests</h3>
    <ul class="instruction-list">
      <li>We have a dataset <code>party</code>.</li>
      <li>Create a table comparing <code>drink</code> and <code>mood</code>.</li>
      <li>Save it as <code>my_table</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="my_table <- table(party$drink, party$mood); my_table"
                data-output="        Calm  Feisty<br>Sherry     5      20<br>Tea       25       2">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>2. The Chi-Squared Test</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> We need to know if the relationship is significant. We use the <strong>Chi-Squared Test of Independence</strong> ($\chi^2$).</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>chisq.test(my_table)</code>
    </div>
    <ul>
      <li><strong>Null ($H_0$):</strong> Variables are Independent (Sherry does NOT affect Mood).</li>
      <li><strong>Alternative ($H_1$):</strong> Variables are Related.</li>
    </ul>
  </div>

  <div class="instruction-box">
    <h3>ðŸ«– Mission: Run the Test</h3>
    <ul class="instruction-list">
      <li>Run <code>chisq.test()</code> on <code>my_table</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="chisq.test(my_table)"
                data-output="Pearson's Chi-squared test<br>X-squared = 28.4, df = 1, p-value < 0.001">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>3. Visualizing Proportions</h2>
  <div class="lesson-text">
    <p>To show categorical data, we use a Bar Plot. To compare proportions, we want a <strong>100% Stacked Bar Chart</strong>.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>+ geom_bar(position = "fill")</code>
    </div>
  </div>



  [Image of stacked bar chart]


  <div class="instruction-box">
    <h3>ðŸ«– Mission: Stack the Bars</h3>
    <ul class="instruction-list">
      <li>Plot <code>party</code> with x=drink, fill=mood.</li>
      <li>Add <code>geom_bar(position = "fill")</code>.</li>
      <li>Add <code>labs(y = "Proportion")</code> to fix the label.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer='ggplot(party, aes(x = drink, fill = mood)) + geom_bar(position = "fill") + labs(y = "Proportion")'
                data-output="[Plot Created: Stacked bars showing Sherry drinkers are 80% Feisty]">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>4. Reporting Results</h2>
  <div class="lesson-text">
    <p>For your BILD 5 lab report, report the $\chi^2$ value, degrees of freedom (df), and P-value.</p>
    <blockquote style="background:#f9f9f9; padding:10px; border-left: 5px solid var(--yale-blue);">
      "There was a significant association between drink choice and mood ($\chi^2(1, N=52) = 28.4$, p < 0.001). Emily was right."
    </blockquote>
  </div>
</div>

<footer style="text-align: center; margin-top: 50px; color: #8d6e63; font-style: italic;">
  <p>Please pass the sugar. â€¢ Created for BILD 5</p>
</footer>

</body>
</html>