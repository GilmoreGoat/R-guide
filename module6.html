<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 6: The Secret Society</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>
<body>
<nav><a href="index.html">&larr; Back to Town</a></nav>
<header>
    <h1>Module 6: The Secret Society</h1>
    <p>"In Omnia Paratus. (Ready for anything.)"</p>
</header>

<div class="concept-card">
    <h2>1. The Logic (case_when)</h2>
    <p><strong>The Concept:</strong> `ifelse()` is fine for two choices (Coffee vs. Tea). But life is messy. For complex logic, we use <strong>`case_when()`</strong>.</p>
    <p>It reads like a list of requirements. If the first one is true, it assigns that value and stops. If not, it checks the next.</p>
    <div class="instruction-box">
        <h3>☂️ Mission: Sort the Guests</h3>
        <ul class="instruction-list">
            <li>We have a `guests` table with an `age` column.</li>
            <li>Create a new column `status`:
                <ul>
                    <li>If age < 21, they are "Minor".</li>
                    <li>If age > 65, they are "Elder".</li>
                    <li>Everyone else (using `TRUE`) is "Adult".</li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer='guests |> mutate(status = case_when(age < 21 ~ "Minor", age > 65 ~ "Elder", TRUE ~ "Adult"))'
                        data-output="  age status<br>1  20  Minor<br>2  30  Adult<br>3  70  Elder">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>2. Joining Data (The Merger)</h2>
    <p><strong>The Concept:</strong> Often your data is split into two files. One has names, the other has grades. To combine them, we use <strong>Joins</strong>.</p>
    <ul>
        <li><strong>`left_join(x, y)`</strong>: Keep everyone in Table X. Match info from Table Y if it exists. (The standard).</li>
        <li><strong>`inner_join(x, y)`</strong>: Keep ONLY people who are in BOTH tables. (The exclusive club).</li>
    </ul>

    <div class="instruction-box">
        <h3>☂️ Mission: Find the Members</h3>
        <ul class="instruction-list">
            <li>You have a `students` table and a `society_list` table.</li>
            <li>Use `left_join()` to add the society info to the students.</li>
            <li>Join by the column `"id"`.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer='students |> left_join(society_list, by = "id")'
                        data-output="  id  name    society<br>1 01  Rory    LDB<br>2 02  Paris   <NA>">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>3. Distinct (Removing Duplicates)</h2>
    <p><strong>The Concept:</strong> Sometimes merging data creates duplicates. If you see the same person listed three times, you need to clean it.</p>
    <p><strong>`distinct()`</strong> looks at the rows and keeps only unique ones.</p>

    <div class="instruction-box">
        <h3>☂️ Mission: Clean the Guest List</h3>
        <ul class="instruction-list">
            <li>The `invites` table has duplicates.</li>
            <li>Run `distinct()` on it to keep unique names only.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer="invites |> distinct()"
                        data-output="[Duplicates removed. 50 unique guests remain.]">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<footer style="text-align: center; margin-top: 50px; color: #8d6e63; font-style: italic;">
    <p>Detailed Reference Guide • BILD 5</p>
</footer>

</body>
</html>