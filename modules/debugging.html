<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <title>Debugging: Paris Geller's Bunker</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="modulepreload" href="https://webr.r-wasm.org/v0.5.8/webr.mjs">
    <script type="module" src="../js/script.js"></script>
</head>
<body>
<nav><a href="../syllabus.html">&larr; Back to Syllabus</a></nav>
<header>
    <h1>Skill G: Debugging</h1>
    <p>"I am not crazy. I am efficient. And this code is wrong." ‚Äî Paris Geller</p>
</header>

<div class="concept-card">
    <h2>1. The Traceback (The Scene of the Crime)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> When R crashes, it yells an error message. But <em>where</em> did it happen? Was it in your function, or a function inside a function? <code>traceback()</code> shows you the stack of calls leading up to the disaster.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>traceback()</code>
        </div>
        <p>Run this <em>immediately</em> after an error to see the "crime scene" (call stack) in reverse order.</p>
    </div>
    <div class="instruction-box">
        <h3>üê© Mission: The Printing Press</h3>
        <ul class="instruction-list">
            <li>We have a broken function chain: <code>print_paper() -> check_ink() -> load_paper()</code>.</li>
            <li><code>load_paper()</code> throws an error if pages are negative.</li>
            <li>Call <code>print_paper(-1)</code> and check the traceback.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="print_paper <- function(x) check_ink(x); check_ink <- function(x) load_paper(x); load_paper <- function(x) if(x<0) stop('Jam!'); try(print_paper(-1)); traceback()" data-output="3: load_paper(x) at <text>#1
2: check_ink(x) at <text>#1
1: print_paper(-1)">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>2. The Browser (The Pause Button)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Sometimes reading the error isn't enough. You need to be <em>in</em> the room when it happens. <code>browser()</code> pauses execution and lets you look around inside the function environment.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>if (condition) browser()</code>
        </div>
        <p>It's like hitting pause on a movie to see if the boom mic is in the shot.</p>
    </div>
    <div class="instruction-box">
        <h3>üê© Mission: Anxiety Overload</h3>
        <ul class="instruction-list">
            <li>Create a function <code>check_stress(level)</code>.</li>
            <li>Add <code>if (level > 10) browser()</code> to intervene.</li>
            <li>We can't really open the browser here, but R will stop and tell you it's paused.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="check_stress <- function(level) { if(level > 10) browser(); level }; check_stress(15)" data-output="Called from: check_stress(15)
Browse[1]> ">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>3. Handling Meltdowns (TryCatch)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Sometimes you <em>know</em> something might break (like a rejection letter), and you want to handle it gracefully instead of crashing the whole program.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>tryCatch(expr, error = function(e) { ... })</code>
        </div>
        <p>This catches the error object <code>e</code> and lets you return a default value (like <code>NA</code>) or print a nicer message.</p>
    </div>
    <div class="instruction-box">
        <h3>üê© Mission: Handle Rejection</h3>
        <ul class="instruction-list">
            <li>Use <code>tryCatch</code> to run <code>log("Harvard Acceptance")</code> (which is an error).</li>
            <li>If an error occurs, return <code>0</code> (Safe Escape) instead of crashing.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="tryCatch(log('Harvard Acceptance'), error = function(e) 0)" data-output="[1] 0">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

</body>
</html>