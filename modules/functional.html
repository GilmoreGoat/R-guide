<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <title>Functional Programming: Mrs. Kim's Antiques</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="modulepreload" href="https://webr.r-wasm.org/v0.5.8/webr.mjs">
    <script type="module" src="../js/script.js"></script>
</head>
<body>
<nav><a href="../syllabus.html">&larr; Back to Syllabus</a></nav>
<header>
    <h1>Skill D: Functional Programming</h1>
    <p>"You break it, you buy it. I have a system for everything." ‚Äî Mrs. Kim</p>
</header>

<div class="concept-card">
    <h2>1. The Map (Inventory Management)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Mrs. Kim does not do things one by one. She delegates. In R, loops (<code>for</code>) are slow and clumsy. The <code>purrr</code> package gives us <code>map()</code>.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>map(list, function)</code>
        </div>
        <p>It takes a list (or vector/dataframe) and applies a function to <em>each element</em>. It always returns a <strong>list</strong>.</p>
    </div>
    <div class="instruction-box">
        <h3>üõãÔ∏è Mission: Inspect the Inventory</h3>
        <ul class="instruction-list">
            <li>We have the <code>antiques</code> dataframe.</li>
            <li>Use <code>map()</code> to apply the <code>class</code> function to every column.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="map(..., ...)">
                <button class="check-btn" data-answer="map(antiques, class)" data-output="$item
[1] 'character'

$price
[1] 'numeric'">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>2. Type Safety (Strict Standards)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Mrs. Kim hates ambiguity. If she asks for a number, she expects a number. <code>map()</code> returns a list, which can be messy.</p>
        <div class="lesson-box">
            <strong>Variants:</strong><br>
            <code>map_dbl()</code> returns a numeric vector (Double).<br>
            <code>map_chr()</code> returns a character vector (Text).<br>
            <code>map_lgl()</code> returns a logical vector (TRUE/FALSE).
        </div>
        <p>Use these when you know exactly what you want back.</p>
    </div>
    <div class="instruction-box">
        <h3>üõãÔ∏è Mission: Price Adjustment</h3>
        <ul class="instruction-list">
            <li>We need to calculate the base value. We have prices: <code>prices <- c(100, 400, 900)</code>.</li>
            <li>Use <code>map_dbl()</code> with the <code>sqrt</code> function to find the base factor.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="map_dbl(c(100, 400, 900), sqrt)" data-output="[1] 10 20 30">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>3. Anonymous Functions (The Secret Task)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Sometimes you need a function for just one specific job, and you don't want to name it (like a secret transaction).</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>map(data, ~ .x + 10)</code>
        </div>
        <p>The <code>~</code> (tilde) signals a formula. The <code>.x</code> represents "the current item". It's a shorthand for writing a full function.</p>
    </div>
    <div class="instruction-box">
        <h3>üõãÔ∏è Mission: The 'You Break It' Fee</h3>
        <ul class="instruction-list">
            <li>A clumsy customer entered. We have fees: <code>breakage_fee <- c(10, 20, 30)</code>.</li>
            <li>Use <code>map_dbl()</code> to double (<code>* 2</code>) each fee using the <code>~ .x * 2</code> syntax.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="map_dbl(c(10, 20, 30), ~ .x * 2)" data-output="[1] 20 40 60">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

</body>
</html>