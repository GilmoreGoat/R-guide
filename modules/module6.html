<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <title>Skill A: The Life & Death Brigade</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="modulepreload" href="https://webr.r-wasm.org/v0.5.8/webr.mjs">
    <script type="module" src="../js/script.js"></script>
</head>
<body>
<nav><a href="../index.html">&larr; Back to Town</a></nav>
<header>
    <h1>Skill A: The Life & Death Brigade</h1>
    <p>"In Omnia Paratus. (Ready for anything.)"</p>
</header>

<div class="concept-card">
    <h2>1. Advanced Logic (case_when)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> `ifelse()` is fine for two choices (Coffee vs. Tea). But life is messy. For complex logic, we use <strong>`case_when()`</strong>.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong><br>
            <code>mutate(new_col = case_when(<br>
                &nbsp;&nbsp;condition1 ~ "Value1",<br>
                &nbsp;&nbsp;condition2 ~ "Value2",<br>
                &nbsp;&nbsp;TRUE ~ "ElseValue"<br>
                ))</code>
        </div>
        <p>It reads like a list of requirements. If the first one is true, it assigns that value and stops.</p>
    </div>
    <div class="instruction-box">
        <h3>ü¶ç Mission: Sort the Members</h3>
        <ul class="instruction-list">
            <li>We have a `guests` table with a `costume` column.</li>
            <li>Create `dress_code`: "Tux" is "Formal", "Gown" is "Formal", else "Casual".</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer='guests |> mutate(dress_code = case_when(costume == "Tux" ~ "Formal", costume == "Gown" ~ "Formal", TRUE ~ "Casual"))'
                        data-output="  name   costume  dress_code<br>1 Rory   Gown     Formal<br>2 Paris  Suit     Casual">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>2. Joining Data (The Merger)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Often your data is split into two files. One has names, the other has grades. To combine them, we use <strong>Joins</strong>.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>left_join(x, y, by = "shared_col")</code>
        </div>
        <ul>
            <li><strong>`left_join`</strong>: Keep everyone in Table X. Match info from Table Y if it exists.</li>
            <li><strong>`inner_join`</strong>: Keep ONLY people who are in BOTH tables.</li>
        </ul>
    </div>
    <div class="instruction-box">
        <h3>ü¶ç Mission: Find the Initiates</h3>
        <ul class="instruction-list">
            <li>Use `left_join()` to merge `guests` (X) with `yale_students` (Y).</li>
            <li>Join by the column `"name"`.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer='left_join(guests, yale_students, by = "name")'
                        data-output="  name    status    major<br>1 Logan   Member    Economics<br>2 Rory    Guest     Newspaper">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>3. The Anti-Join (The Gatekeeper)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Sometimes you don't want to match data; you want to find <strong>who is missing</strong>.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>anti_join(x, y, by = "id")</code>
        </div>
        <p>This keeps rows in X that are <strong>NOT</strong> in Y.</p>
    </div>
    <div class="instruction-box">
        <h3>ü¶ç Mission: Who is Missing?</h3>
        <ul class="instruction-list">
            <li>Find students in `yale_students` who are NOT in `guests`.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer='anti_join(yale_students, guests, by = "name")'
                        data-output="  name    major<br>1 Marty   History<br>2 Doyle   Journalism">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>4. Distinct (Removing Duplicates)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> If you see the same person listed three times, you need to clean it.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>distinct(data, col, .keep_all = TRUE)</code>
        </div>
    </div>
    <div class="instruction-box">
        <h3>ü¶ç Mission: Clean the Roster</h3>
        <ul class="instruction-list">
            <li>Run `distinct()` on `guests` to keep unique names only.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer="guests |> distinct()"
                        data-output="[Duplicates removed. Unique guests remain.]">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<footer class="footer-text">
    <p>Detailed Reference Guide ‚Ä¢ BILD 5</p>
</footer>

</body>
</html>