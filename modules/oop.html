<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <title>Object-Oriented Programming (OOP)</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="modulepreload" href="https://webr.r-wasm.org/v0.5.8/webr.mjs">
    <script type="module" src="../js/script.js"></script>
</head>
<body>
<nav><a href="../syllabus.html">&larr; Back to Syllabus</a></nav>
<header>
    <h1>Skill E: Object-Oriented Programming (OOP)</h1>
    <p>"If you're going to throw your life away, he'd better have a motorcycle." â€” Emily Gilmore</p>
</header>

<div class="concept-card">
    <h2>1. S3: The Informal Standard</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> S3 is like a garage jam session: informal, flexible, and relies on everyone just "knowing" what to do. It uses <strong>generic functions</strong> that decide what to do based on the class of the object.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>class(obj) <- "myclass"</code>
        </div>
        <p>You can turn any list into an object just by giving it a class name. Then, you define methods like <code>print.myclass</code>.</p>
    </div>
    <div class="instruction-box">
        <h3>ðŸŽ¸ Mission: Create a Song Class</h3>
        <ul class="instruction-list">
            <li>Create a list: <code>my_song <- list(title="Believe it or Not", genre="Rock")</code>.</li>
            <li>Set its class to <code>"song"</code>.</li>
            <li>Define a print method: <code>print.song <- function(x) cat("Now playing:", x$title)</code>.</li>
            <li>Print <code>my_song</code>.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="my_song <- structure(list(title='Believe it or Not', genre='Rock'), class='song'); print.song <- function(x) cat('Now playing:', x$title); print(my_song)" data-output="Now playing: Believe it or Not">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>2. S4: The Strict Standard</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> S4 is the DAR. It has rules, hierarchy, and strict validation. You can't just slap a class name on a list; you have to formally define the class and its "slots" (fields) using <code>setClass</code>.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>setClass("Name", slots = list(field="type"))</code>
        </div>
        <p>It ensures that an object <em>always</em> has the correct data types. No more chaos.</p>
    </div>
    <div class="instruction-box">
        <h3>ðŸ‘  Mission: Define a Member</h3>
        <ul class="instruction-list">
            <li>Define a class <code>Member</code> with slots <code>name="character"</code> and <code>rank="character"</code>.</li>
            <li>Create a new member: <code>emily <- new("Member", name="Emily", rank="President")</code>.</li>
            <li>Print <code>emily</code>.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="setClass('Member', slots = list(name='character', rank='character')); emily <- new('Member', name='Emily', rank='President'); print(emily)" data-output="An object of class 'Member'
Slot 'name':
[1] 'Emily'

Slot 'rank':
[1] 'President'">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>3. R6: Encapsulated Objects</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> R6 is Hep Alien. Everythingâ€”instruments, talent, and attitudeâ€”is contained within a single object. Unlike S3 and S4, R6 objects are <strong>mutable</strong> (they can be changed in place).</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>obj$method()</code>
        </div>
        <p>This is how most other languages (Python, Java) do OOP. It uses the <code>R6</code> package.</p>
    </div>
    <div class="instruction-box">
        <h3>ðŸŽ¸ Mission: The Band Fund</h3>
        <ul class="instruction-list">
            <li>We've loaded the <code>R6</code> package.</li>
            <li>Define a <code>BandFund</code> class with public <code>cash</code> and an <code>add_gig_pay</code> method.</li>
            <li>Create a fund (<code>hep_alien</code>) and add $100.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn" data-answer="BandFund <- R6Class('BandFund', public = list(cash = 0, add_gig_pay = function(x) { self$cash <- self$cash + x })); hep_alien <- BandFund$new(); hep_alien$add_gig_pay(100); hep_alien$cash" data-output="[1] 100">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

</body>
</html>