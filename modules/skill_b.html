<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <title>Skill B: The Festival Calendar</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <script type="module" src="../js/script.js"></script>
</head>
<body>
<nav><a href="../index.html">&larr; Back to Town</a></nav>
<header>
    <h1>Skill B: The Festival Calendar</h1>
    <p>"If you can't track the timeline, you can't track the drama."</p>
</header>

<div class="concept-card">
    <h2>1. Parsing Dates (The Format Fix)</h2>
    <div class="lesson-text">
        <p><strong>The Problem:</strong> Excel ruins dates. R needs to know the format to understand it.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong><br>
            <code>mdy("Jan 1, 2024")</code> -> Month-Day-Year<br>
            <code>ymd("2024-01-01")</code> -> Year-Month-Day
        </div>
    </div>
    <div class="instruction-box">
        <h3>üçÇ Mission: Fix the Festival</h3>
        <ul class="instruction-list">
            <li>Convert the <code>date_str</code> column using <code>mdy()</code>.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer="festivals |> mutate(date = mdy(date_str))"
                        data-output="  event          date<br>1 Firelight      2024-02-14">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>2. Doing Math with Time</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Once R knows it's a date, you can do math! Calculate duration by subtraction.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>mutate(diff = end_date - start_date)</code>
        </div>
    </div>
    <div class="instruction-box">
        <h3>üçÇ Mission: Calculate Duration</h3>
        <ul class="instruction-list">
            <li>Calculate <code>hours</code> by subtracting <code>start</code> from <code>end</code> in `marathon`.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer="marathon |> mutate(hours = end - start)"
                        data-output="  contestant  hours<br>1 Kirk        24.0 hours">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>3. Extracting Details</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> Pull out specific parts of a date for grouping.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong><br>
            <code>month(date, label = TRUE)</code> -> "Jan"<br>
            <code>wday(date, label = TRUE)</code> -> "Mon"
        </div>
    </div>
    <div class="instruction-box">
        <h3>üçÇ Mission: Analyze Seasonality</h3>
        <ul class="instruction-list">
            <li>Create a <code>season</code> column using <code>month()</code> with labels.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer="data |> mutate(season = month(date, label = TRUE))"
                        data-output="  date        season<br>1 2024-10-31  Oct">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<div class="concept-card">
    <h2>4. Rounding Dates (Floor)</h2>
    <div class="lesson-text">
        <p><strong>The Concept:</strong> To group data by week or month, we "round down" the date.</p>
        <div class="lesson-box">
            <strong>Syntax:</strong> <code>floor_date(date, unit = "week")</code>
        </div>
        <p>This sets every date to the start of its week.</p>
    </div>
    <div class="instruction-box">
        <h3>üçÇ Mission: Weekly Sales</h3>
        <ul class="instruction-list">
            <li>Round the <code>date</code> down to the <code>"week"</code>.</li>
        </ul>
    </div>
    <div class="editor-container">
        <div class="editor-header">script.R</div>
        <div class="editor-body">
            <div class="code-input-line">
                <span class="prompt">></span>
                <input type="text" class="editor-input input-code" placeholder="...">
                <button class="check-btn"
                        data-answer='sales |> mutate(week_start = floor_date(date, "week"))'
                        data-output="  date        week_start<br>1 2024-01-05  2024-01-01">Run</button>
            </div>
        </div>
        <div class="console-output feedback"></div>
    </div>
</div>

<footer class="footer-text">
    <p>Time flies when you're caffeinated. ‚Ä¢ Created for Research</p>
</footer>

</body>
</html>