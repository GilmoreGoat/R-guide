<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <title>Paris Geller's Master Reference</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="script.js"></script>
    <script type="module" src="reference.js"></script>
    <link rel="stylesheet" href="reference.css">
</head>
<body>
<nav><a href="index.html">&larr; Back to Town</a></nav>
<header>
    <h1>Paris Geller's Master Reference</h1>
    <p>"I have verified this information three times. It is correct. Do not deviate."</p>
</header>

<div class="toc-container stars-hollow-theme">
    <div class="toc-title">
        <h3>ðŸŽ“ Stars Hollow (Essentials)</h3>
        <p>Everything you need to survive <strong>BILD 5</strong>.</p>
    </div>
    <div class="toc-buttons">
        <button class="toc-btn" data-section="setup">1. Setup</button>
        <button class="toc-btn" data-section="basics">2. Basics</button>
        <button class="toc-btn" data-section="math">3. Math</button>
        <button class="toc-btn" data-section="wrangling">4. Wrangling</button>
        <button class="toc-btn" data-section="tidying">5. Tidying</button>
        <button class="toc-btn" data-section="viz">6. Viz</button>
        <button class="toc-btn" data-section="testing">7. Stats</button>
    </div>
</div>

<div class="town-divider divider-container">
    <span class="divider-text">
        ðŸŒ‚ You Jump, I Jump, Jack ðŸŒ‚
    </span>
</div>

<div class="toc-container yale-theme">
    <div class="toc-title">
        <h3 class="text-yale-blue">The Life & Death Brigade (Advanced)</h3>
        <p><em>In Omnia Paratus.</em> (Ready for anything).</p>
    </div>
    <div class="toc-buttons">
        <button class="toc-btn yale-btn" data-section="adv-wrangling">8. Adv. Wrangling</button>
        <button class="toc-btn yale-btn" data-section="adv-viz">9. Adv. Viz</button>
        <button class="toc-btn yale-btn" data-section="adv-tidy">10. Deep Tidying</button>
        <button class="toc-btn yale-btn" data-section="adv-strings">11. String Theory</button>
        <button class="toc-btn yale-btn" data-section="adv-time">12. Time Travel</button>
        <button class="toc-btn yale-btn" data-section="adv-stats">13. The Model Shop</button>
    </div>
</div>

<details id="setup" class="essentials-section">
    <summary>1. Setup & Import</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>install.packages() / library()</h3>
            <p><strong>Usage:</strong> The two-step process to get tools.</p>
            <div class="syntax-block">
                install.packages("tidyverse") <span class="text-muted"># Run ONCE per computer</span>
                library(tidyverse)            <span class="text-muted"># Run EVERY time you restart R</span>
            </div>
            <div class="warning-box">
                <span class="warning-title">Paris's Warning:</span>
                <code>install</code> REQUIRES quotes. <code>library</code> does NOT.
            </div>
        </div>
        <div class="ref-item">
            <h3>read.csv()</h3>
            <p><strong>Usage:</strong> Loading data.</p>
            <div class="syntax-block">data <- read.csv("filename.csv")</div>
        </div>
    </div>
</details>

<details id="basics" class="essentials-section">
    <summary>2. Syntax & Objects</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>&lt;- (Assignment)</h3>
            <p><strong>Usage:</strong> Saves data into a name.</p>
            <div class="syntax-block">my_gpa &lt;- 4.0</div>
        </div>
        <div class="ref-item">
            <h3>c()</h3>
            <p><strong>Usage:</strong> "Combine". Creates a <strong>Vector</strong> (list).</p>
            <div class="syntax-block">grades &lt;- c(95, 82, 100)</div>
            <div class="warning-box">
                <span class="warning-title">Atomic Rule:</span>
                You cannot mix types! <code>c(1, "two")</code> becomes <code>"1", "two"</code> (all text).
            </div>
        </div>
        <div class="ref-item">
            <h3>class() & glimpse()</h3>
            <p><strong>Usage:</strong> Checking what you are working with.</p>
            <ul>
                <li><code>class(x)</code>: Tells you if it's "numeric", "character", etc.</li>
                <li><code>glimpse(df)</code>: Shows a quick preview of your entire dataset.</li>
            </ul>
        </div>
    </div>
</details>

<details id="math" class="essentials-section">
    <summary>3. Math & Summary Stats</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>Basic Stats</h3>
            <p><strong>Usage:</strong> Analyzing a single column (vector).</p>
            <div class="syntax-block">
                mean(vec, na.rm = TRUE)
                median(vec)
                sd(vec)
                range(vec)
            </div>
        </div>
        <div class="ref-item">
            <h3>skim()</h3>
            <p><strong>Usage:</strong> (From <code>skimr</code>). The "SparkNotes" of your data.</p>
            <div class="syntax-block">skim(data)</div>
        </div>
        <div class="ref-item">
            <h3>table()</h3>
            <p><strong>Usage:</strong> Counts frequency of values in a vector.</p>
            <div class="syntax-block">table(data$column)</div>
        </div>
    </div>
</details>

<details id="wrangling" class="essentials-section">
    <summary>4. Wrangling (dplyr)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>|&gt; (The Pipe)</h3>
            <p><strong>Usage:</strong> Passes data from left to right.</p>
            <div class="syntax-block">data |&gt; filter(...) |&gt; select(...)</div>
        </div>
        <div class="ref-item">
            <h3>filter() vs select()</h3>
            <p><strong>Usage:</strong> Cutting the data.</p>
            <ul>
                <li><code>filter()</code>: Keeps <strong>ROWS</strong> based on logic (e.g., <code>age > 18</code>).</li>
                <li><code>select()</code>: Keeps <strong>COLUMNS</strong> by name.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>arrange()</h3>
            <p><strong>Usage:</strong> Sorting rows.</p>
            <div class="syntax-block">
                data |&gt; arrange(score)        <span class="text-muted"># Low to High</span>
                data |&gt; arrange(desc(score))  <span class="text-muted"># High to Low</span>
            </div>
        </div>
        <div class="ref-item">
            <h3>mutate()</h3>
            <p><strong>Usage:</strong> Creating new columns.</p>
            <div class="syntax-block">mutate(new_col = old_col * 2)</div>
        </div>
        <div class="ref-item">
            <h3>count()</h3>
            <p><strong>Usage:</strong> "How many people are in each group?"</p>
            <div class="syntax-block">data |&gt; count(gender, sort = TRUE)</div>
        </div>
        <div class="ref-item">
            <h3>group_by() + summarise()</h3>
            <p><strong>Usage:</strong> The Pivot Table. Splits, calculates, recombines.</p>
            <div class="syntax-block">
                data |&gt;
                group_by(house) |&gt;
                summarise(avg_gpa = mean(gpa))
            </div>
        </div>
    </div>
</details>

<details id="tidying" class="essentials-section">
    <summary>5. Tidying (tidyr)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>pivot_longer()</h3>
            <p><strong>Usage:</strong> "Wide" to "Long". Needed for ggplot.</p>
            <div class="syntax-block">pivot_longer(data, cols = c("Week1", "Week2"), names_to = "Time", values_to = "Score")</div>
        </div>
        <div class="ref-item">
            <h3>pivot_wider()</h3>
            <p><strong>Usage:</strong> "Long" to "Wide". Good for readable tables.</p>
        </div>
    </div>
</details>

<details id="viz" class="essentials-section">
    <summary>6. Visualization (ggplot2)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>The Template</h3>
            <div class="syntax-block">ggplot(data, aes(x=col1, y=col2)) + geom_FUNCTION()</div>
            <div class="warning-box">
                <span class="warning-title">Plus Sign Alert:</span>
                Use <code>+</code> to add layers, NOT the pipe <code>|&gt;</code>.
            </div>
        </div>
        <div class="ref-item">
            <h3>Essential Geoms</h3>
            <ul>
                <li><code>geom_histogram()</code>: Distribution (1 numeric var).</li>
                <li><code>geom_bar()</code>: Counts (1 category var).</li>
                <li><code>geom_col()</code>: Values (1 category + 1 numeric).</li>
                <li><code>geom_boxplot()</code>: Comparison (Cat vs Num).</li>
                <li><code>geom_point()</code>: Scatterplot (Num vs Num).</li>
                <li><code>geom_smooth(method="lm")</code>: Add a trend line.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>Polishing</h3>
            <ul>
                <li><code>+ theme_classic()</code>: Clean look.</li>
                <li><code>+ labs(title="...", x="...", y="...")</code>: Labels.</li>
                <li><code>+ facet_wrap(~ group)</code>: Splits plot into small multiples.</li>
            </ul>
        </div>
    </div>
</details>

<details id="testing" class="essentials-section">
    <summary>7. Statistical Tests</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>The Workflow</h3>
            <ol>
                <li><strong>Check Normality:</strong> <code>ks.test()</code> or <code>shapiro.test()</code>.</li>
                <li><strong>Run Test:</strong> <code>t.test()</code>.</li>
            </ol>
        </div>
        <div class="ref-item">
            <h3>t.test() Flavors</h3>
            <ul>
                <li><strong>One Sample:</strong> <code>t.test(vec, mu=100)</code>.</li>
                <li><strong>Unpaired:</strong> <code>t.test(val ~ group, data=df)</code>.</li>
                <li><strong>Paired:</strong> <code>t.test(pre, post, paired=TRUE)</code>.</li>
            </ul>
        </div>
    </div>
</details>

<details id="adv-wrangling" class="advanced-section">
    <summary>8. Advanced Wrangling (The Logic)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>case_when()</h3>
            <p><strong>Usage:</strong> Creates new columns with multiple conditions.</p>
            <div class="syntax-block">
                mutate(grade = case_when(
                score >= 90 ~ "A",
                TRUE ~ "F"
                ))
            </div>
        </div>
        <div class="ref-item">
            <h3>Joins (Merging)</h3>
            <p><strong>Usage:</strong> Combining tables by ID.</p>
            <ul>
                <li><code>left_join(x, y)</code>: Keep all X (most common).</li>
                <li><code>inner_join(x, y)</code>: Keep only matches.</li>
                <li><code>anti_join(x, y)</code>: Find what is missing (in X but not Y).</li>
                <li><code>full_join(x, y)</code>: Keep everything from both.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>distinct()</h3>
            <p><strong>Usage:</strong> Removes duplicate rows.</p>
            <div class="syntax-block">distinct(data, student_id, .keep_all = TRUE)</div>
        </div>
        <div class="ref-item">
            <h3>slice() & sample_n()</h3>
            <p><strong>Usage:</strong> Picking specific rows.</p>
            <ul>
                <li><code>slice(1:5)</code>: Grab the first 5 rows.</li>
                <li><code>sample_n(10)</code>: Pick 10 random rows.</li>
                <li><code>top_n(5, wt=score)</code>: Pick the top 5 highest scores.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>bind_rows()</h3>
            <p><strong>Usage:</strong> Stacking tables (e.g., "Class A" + "Class B").</p>
            <div class="syntax-block">bind_rows(df1, df2)</div>
        </div>
        <div class="ref-item">
            <h3>lag() & lead()</h3>
            <p><strong>Usage:</strong> Looking forwards or backwards.</p>
            <div class="syntax-block">mutate(change = price - lag(price))</div>
        </div>
        <div class="ref-item">
            <h3>Summary Counters</h3>
            <p><strong>Usage:</strong> Inside <code>summarise()</code>.</p>
            <ul>
                <li><code>n()</code>: Counts number of rows in the group.</li>
                <li><code>n_distinct(col)</code>: Counts number of unique items.</li>
            </ul>
        </div>
    </div>
</details>

<details id="adv-viz" class="advanced-section">
    <summary>9. Advanced Visualization (The Art)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>Manual Scales</h3>
            <p><strong>Usage:</strong> Defining your own colors.</p>
            <div class="syntax-block">+ scale_fill_manual(values = c("A"="red", "B"="blue"))</div>
        </div>
        <div class="ref-item">
            <h3>coord_flip()</h3>
            <p><strong>Usage:</strong> Flips X and Y axis. Lifesaver for bar charts with long names.</p>
        </div>
        <div class="ref-item">
            <h3>Reordering Factors</h3>
            <p><strong>Usage:</strong> Fixing the order of bars (High to Low instead of A-Z).</p>
            <div class="syntax-block">aes(x = fct_reorder(category, value))</div>
        </div>
        <div class="ref-item">
            <h3>Position Adjustments</h3>
            <p><strong>Usage:</strong> How bars sit next to each other.</p>
            <ul>
                <li><code>geom_bar(position = "dodge")</code>: Side-by-side bars.</li>
                <li><code>geom_bar(position = "fill")</code>: 100% stacked bars.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>Violin Plots</h3>
            <p><strong>Usage:</strong> Like a boxplot, but shows the density shape.</p>
            <div class="syntax-block">+ geom_violin()</div>
        </div>
        <div class="ref-item">
            <h3>ggsave()</h3>
            <p><strong>Usage:</strong> Saving high-res plots.</p>
            <div class="syntax-block">ggsave("plot.png", width=6, height=4, dpi=300)</div>
        </div>
    </div>
</details>

<details id="adv-tidy" class="advanced-section">
    <summary>10. Deep Tidying (The Cleanup)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>separate() & unite()</h3>
            <p><strong>Usage:</strong> Splitting or merging text columns.</p>
            <ul>
                <li><code>separate(col, into=c("A","B"), sep="-")</code>: "2024-01" -> "2024", "01".</li>
                <li><code>unite()</code>: The reverse.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>Handling Missing Data</h3>
            <p><strong>Usage:</strong> Dealing with <code>NA</code>.</p>
            <ul>
                <li><code>drop_na()</code>: Deletes the whole row.</li>
                <li><code>replace_na()</code>: Fills with a value (e.g., 0).</li>
                <li><code>fill()</code>: Fills with the value above it.</li>
            </ul>
        </div>
        <div class="ref-item">
            <h3>complete()</h3>
            <p><strong>Usage:</strong> Adds rows for missing combinations (e.g., if "Day 3" is missing, it adds it).</p>
            <div class="syntax-block">complete(data, Day, Student)</div>
        </div>
        <div class="ref-item">
            <h3>nest() & unnest()</h3>
            <p><strong>Usage:</strong> The "Inception" of data frames. Puts a whole table inside a single cell.</p>
        </div>
    </div>
</details>

<details id="adv-strings" class="advanced-section">
    <summary>11. String Theory (stringr)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>str_detect()</h3>
            <p><strong>Usage:</strong> The search function. Returns TRUE/FALSE.</p>
            <div class="syntax-block">filter(data, str_detect(email, ".edu"))</div>
        </div>
        <div class="ref-item">
            <h3>str_replace()</h3>
            <p><strong>Usage:</strong> Find and replace text.</p>
            <div class="syntax-block">mutate(city = str_replace(city, "San Fran", "SF"))</div>
        </div>
        <div class="ref-item">
            <h3>str_sub()</h3>
            <p><strong>Usage:</strong> Extract part of a string by position.</p>
            <div class="syntax-block">str_sub("2024-01-01", 1, 4) # Returns "2024"</div>
        </div>
    </div>
</details>

<details id="adv-time" class="advanced-section">
    <summary>12. Time Travel (lubridate)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>ymd() / mdy()</h3>
            <p><strong>Usage:</strong> Auto-converts text to Date format.</p>
            <div class="syntax-block">ymd("2024-02-14")</div>
        </div>
        <div class="ref-item">
            <h3>Extracting Parts</h3>
            <p><strong>Usage:</strong> Pulling info from a date.</p>
            <ul>
                <li><code>year(date_col)</code></li>
                <li><code>month(date_col, label = TRUE)</code> (Returns "Jan", "Feb").</li>
                <li><code>wday(date_col)</code> (Day of the week).</li>
            </ul>
        </div>
    </div>
</details>

<details id="adv-stats" class="advanced-section">
    <summary>13. The Model Shop (Adv. Stats)</summary>
    <div class="ref-content">
        <div class="ref-item">
            <h3>Linear Regression (lm)</h3>
            <p><strong>Usage:</strong> Predicting one variable based on another.</p>
            <div class="syntax-block">model <- lm(height ~ age, data = df)</div>
            <div class="warning-box">
                <span class="warning-title">Tip:</span> Use <code>summary(model)</code> to see the results.
            </div>
        </div>
        <div class="ref-item">
            <h3>Correlation (cor.test)</h3>
            <p><strong>Usage:</strong> Checking if two things are related.</p>
            <div class="syntax-block">cor.test(df$age, df$height)</div>
        </div>
        <div class="ref-item">
            <h3>ANOVA (aov)</h3>
            <p><strong>Usage:</strong> Comparing 3+ groups.</p>
            <div class="syntax-block">
                model <- aov(score ~ school, data = df)
                TukeyHSD(model) # Post-hoc test to see WHICH group is different
            </div>
        </div>
    </div>
</details>

<footer class="footer-alt">
    <p>Detailed Reference Guide â€¢ BILD 5</p>
</footer>

</body>
</html>