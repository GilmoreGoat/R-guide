<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://webr.r-wasm.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://webr.r-wasm.org https://repo.r-wasm.org; worker-src 'self' blob: https://webr.r-wasm.org; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
  <title>Module 5: Yale Stats</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="script.js"></script>
</head>
<body>
<nav><a href="index.html">&larr; Back to Town</a></nav>
<header>
  <h1>Module 5: Yale Daily News</h1>
  <p>"I don't care what you 'feel', Doyle. Show me the P-value."</p>
</header>

<div class="concept-card">
  <h2>1. Data Cleaning (The Kirk Penguin)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> Before you run any stats, check for errors. If a penguin weighs 120kg, that is Kirk in a costume.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>data |> filter(column < 100)</code>
    </div>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: Remove the Giant</h3>
    <ul class="instruction-list">
      <li>Filter <code>penguins</code> to keep mass less than <code>120</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="penguins |> filter(mass_kg < 120)"
                data-output="[Filtered: 1 row removed. Kirk has been ejected.]">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>2. Normality Check (The KS Test)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> Most tests assume your data fits a <strong>Normal Distribution</strong> (Bell Curve). We use the <strong>Kolmogorov-Smirnov Test</strong> (`ks.test`).</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong><br>
      <code>ks.test(x, "pnorm", mean(x), sd(x))</code>
    </div>
    <p><strong>Rule:</strong> If P < 0.05, the data is NOT Normal (Weird).</p>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: Run the Test</h3>
    <ul class="instruction-list">
      <li>Run <code>ks.test</code> on the <code>mass</code> vector.</li>
      <li>Use arguments: <code>y="pnorm"</code>, <code>mean=mean(mass)</code>, <code>sd=sd(mass)</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer='ks.test(x = mass, y = "pnorm", mean = mean(mass), sd = sd(mass))'
                data-output="One-sample Kolmogorov-Smirnov test<br>D = 0.12, p-value = 0.003<br>(Not Normal. Data is weird.)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>3. The Makeover (Log Transform)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> If your data is skewed, fix it. A <strong>Log Transformation</strong> squashes big numbers down.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>mutate(new_col = log10(old_col))</code>
    </div>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: Log It</h3>
    <ul class="instruction-list">
      <li>Create column <code>log_mass</code> using <code>log10(mass_kg)</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="penguins |> mutate(log_mass = log10(mass_kg))"
                data-output="  mass_kg  log_mass<br>1 4500     3.65">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>4. One-Sample T-Test (The Standard)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> Compare <strong>ONE group</strong> against a known number.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>t.test(vector, mu = number)</code>
    </div>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: Caffeine Check</h3>
    <ul class="instruction-list">
      <li>Run a t-test on <code>coffee_vector</code>.</li>
      <li>Compare it to the limit <code>mu = 4</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="t.test(coffee_vector, mu = 4)"
                data-output="One Sample t-test<br>t = 3.5, p-value = 0.002<br>(Significant. They drink way too much.)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>5. Paired T-Test (Before & After)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> Use this when you measure the <strong>SAME person</strong> twice.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>t.test(vecA, vecB, paired = TRUE)</code>
    </div>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: The Dinner Effect</h3>
    <ul class="instruction-list">
      <li>Compare <code>Stress_Pre</code> and <code>Stress_Post</code>.</li>
      <li>Set <code>paired = TRUE</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="t.test(Stress_Pre, Stress_Post, paired = TRUE)"
                data-output="Paired t-test<br>t = -5.1, p-value = 0.0001<br>(Significant increase in stress.)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>6. Unpaired T-Test (Two Groups)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> Compare two <strong>independent</strong> groups (e.g., Jess vs. Dean).</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>t.test(Numeric ~ Group, data = df)</code>
    </div>
    <p><strong>Note:</strong> You must use the Tilde <code>~</code> (read as "by").</p>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: The Swan Incident</h3>
    <ul class="instruction-list">
      <li>Compare <code>beak_marks</code> by <code>victim</code> using the <code>swans</code> data.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="t.test(beak_marks ~ victim, data = swans)"
                data-output="Two Sample t-test<br>t = 4.2, p-value = 0.01<br>(Jess has significantly more beak marks.)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>7. Power Analysis (The Prep)</h2>
  <div class="lesson-text">
    <p><strong>The Concept:</strong> Paris Geller doesn't guess. She calculates. <strong>Power Analysis</strong> tells you how many samples you need.</p>
    <div style="background: #e8f4f8; padding: 10px; border-radius: 4px; margin-bottom: 10px;">
      <strong>Syntax:</strong> <code>power.t.test(delta=, sd=, power=, type=)</code>
    </div>
    <p><strong>Rule:</strong> Leave <code>n=NULL</code> so R solves for it.</p>
  </div>
  <div class="instruction-box">
    <h3>ðŸ“° Mission: How Many Pies?</h3>
    <ul class="instruction-list">
      <li>You expect a difference of <strong>10</strong> (<code>delta=10</code>).</li>
      <li>Standard Deviation is <strong>15</strong>. Power is <strong>0.8</strong>.</li>
      <li>Calculate <code>n</code> for a <code>"paired"</code> test.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer='power.t.test(delta = 10, sd = 15, power = 0.8, type = "paired")'
                data-output="Paired t test power calculation<br>n = 19.9 (Round up to 20 pies!)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

</body>
</html>